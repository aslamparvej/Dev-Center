<%- include('../includes/head', {webTitle: 'Contact' }) %>
    <%- include('../includes/header') %>
        <main>
            <section class="contact-hero-section">
                <div class="container">
                    <div class="hero-content">
                        <h1>Get in Touch</h1>
                        <p>Have questions about our AI-generated content? Want to collaborate? We'd love to hear from
                            you and help with your software development journey.</p>
                        <div class="response-badge">Typical response time: 24 hours</div>
                    </div>
                </div>
            </section>

            <section class="contact-section">
                <div class="contact-grid">
                    <div class="contact-form">
                        <h2>Send us a Message</h2>
                        <p>Fill out the form below and we'll get back to you as soon as possible.</p>

                        <form id="contactForm" onsubmit="handleSubmit(event)">
                            <div class="form-group">
                                <label for="name">Name *</label>
                                <input type="text" id="name" name="name" required>
                            </div>

                            <div class="form-group">
                                <label for="email">Email Address *</label>
                                <input type="email" id="email" name="email" required>
                            </div>

                            <div class="form-group">
                                <label for="subject">Subject *</label>
                                <select id="subject" name="subject" required>
                                    <option value="">Select a topic...</option>
                                    <option value="general">General Inquiry</option>
                                    <option value="collaboration">Collaboration Opportunity</option>
                                    <option value="content">Content Request</option>
                                    <option value="technical">Technical Support</option>
                                    <option value="feedback">Feedback</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="message">Message *</label>
                                <textarea id="message" name="message"
                                    placeholder="Tell us about your project, question, or how we can help you..."
                                    required></textarea>
                            </div>

                            <button type="submit" class="submit-btn" id="submitBtn">
                                <span>Send Message</span>
                                <span>→</span>
                            </button>
                        </form>
                    </div>

                    <div class="contact-info">
                        <div class="info-card">
                            <h3><span><i class="fas fa-envelope"></i></span> Email</h3>
                            <p>For general inquiries and support</p>
                            <a href="mailto:devcenter.in@gmail.com">devcenter.in@gmail.com</a>
                        </div>

                        <div class="info-card">
                            <h3><span><i class="fa-solid fa-briefcase"></i></span> Business</h3>
                            <p>Partnership and collaboration opportunities</p>
                            <a href="mailto:devcenter.in@gmail.com">devcenter.in@gmail.com</a>
                        </div>

                        <div class="info-card">
                            <h3><span><i class="fa-solid fa-comment"></i></span> Follow Us</h3>
                            <p>Stay updated with our latest content</p>
                            <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
                                <a href="https://x.com/CrazyDevelope18?t=xWxMATJsaXHLH9ews37-Yw&s=08" target="_blank"
                                    style="font-size: 1.5rem;" title="Twitter"><i class="fab fa-twitter"></i></a>
                                <a href="https://www.linkedin.com/company/108716230" target="_blank"
                                    style="font-size: 1.5rem;" title="LinkedIn"><i
                                        class="fa-brands fa-linkedin"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="faq-section">
                <div class="container">
                    <h2>Frequently Asked Questions</h2>
                    <div class="faq-grid">
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                How is your content generated using AI?
                            </div>
                            <div class="faq-answer">
                                We use advanced AI models to research, structure, and write comprehensive articles on
                                software development topics. Each article is then reviewed and refined to ensure
                                accuracy and practical value for developers.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Can I request specific topics to be covered?
                            </div>
                            <div class="faq-answer">
                                Absolutely! We welcome topic suggestions from our community. Use the contact form above
                                with "Content Request" as the subject, and let us know what you'd like to learn about.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Do you offer collaboration opportunities?
                            </div>
                            <div class="faq-answer">
                                Yes, we're always interested in collaborating with developers, companies, and content
                                creators. Reach out to us at devcenter.in@gmail.com with your collaboration ideas.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                How accurate is the AI-generated technical content?
                            </div>
                            <div class="faq-answer">
                                Our AI is trained on the latest software development practices and is regularly updated.
                                However, we always recommend testing code examples in your specific environment and
                                staying updated with official documentation.
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <script>
            function handleSubmit(event) {
                event.preventDefault();

                const submitBtn = document.getElementById('submitBtn');
                const form = document.getElementById('contactForm');
                const SITE_URL = "<%= process.env.SITE_URL %>";

                const name = document.getElementById("name").value;
                const email = document.getElementById("email").value;
                const subject = document.getElementById("subject").value;
                const message = document.getElementById("message").value;


                // Show loading state
                submitBtn.classList.add('loading');
                submitBtn.innerHTML = '<span>Sending...</span><span>⏳</span>';

                // Simulate form submission (replace with actual form handling)
                // setTimeout(() => {
                //     submitBtn.classList.remove('loading');
                //     submitBtn.classList.add('success');
                //     submitBtn.innerHTML = '<span>Message Sent!</span><span>✓</span>';

                //     // Reset form
                //     form.reset();

                //     // Reset button after 3 seconds
                //     setTimeout(() => {
                //         submitBtn.classList.remove('success');
                //         submitBtn.innerHTML = '<span>Send Message</span><span>→</span>';
                //     }, 3000);

                // }, 2000);

                // POST request
                fetch(`${SITE_URL}/contact`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        name: name,
                        email: email,
                        subject: subject,
                        message: message,
                    }),
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log("Response:", data);

                        if (data.success) {
                            // Success state
                            submitBtn.classList.remove("loading");
                            submitBtn.classList.add("success");
                            submitBtn.innerHTML = '<span>Message Sent!</span><span>✓</span>';

                            // Reset form
                            form.reset();

                            // Reset button after 3 seconds
                            setTimeout(() => {
                                submitBtn.classList.remove("success");
                                submitBtn.innerHTML = '<span>Send Message</span><span>→</span>';
                            }, 3000);
                        } else {
                            throw new Error(data.message || "Something went wrong");
                        }
                    })
                    .catch(error => {
                        console.error("Error:", error);

                        // Error state
                        submitBtn.classList.remove("loading");
                        submitBtn.classList.add("error");
                        submitBtn.innerHTML = '<span>Failed!</span><span>⚠️</span>';

                        // Reset button after 3 seconds
                        setTimeout(() => {
                            submitBtn.classList.remove("error");
                            submitBtn.innerHTML = '<span>Send Message</span><span>→</span>';
                        }, 3000);
                    });
            }

            function toggleFaq(element) {
                const answer = element.nextElementSibling;
                const isActive = element.classList.contains('active');

                // Close all FAQ items
                document.querySelectorAll('.faq-question').forEach(q => {
                    q.classList.remove('active');
                    q.nextElementSibling.classList.remove('active');
                });

                // If this item wasn't active, open it
                if (!isActive) {
                    element.classList.add('active');
                    answer.classList.add('active');
                }
            }

            // Smooth scrolling for navigation
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Form validation enhancement
            document.getElementById('contactForm').addEventListener('input', function (e) {
                const field = e.target;
                if (field.checkValidity()) {
                    field.style.borderColor = 'rgba(16, 185, 129, 0.5)';
                } else {
                    field.style.borderColor = 'rgba(59, 130, 246, 0.2)';
                }
            });
        </script>
        <%- include('../includes/footer') %>